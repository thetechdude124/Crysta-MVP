{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DropDatabaseOperation = exports.DropCollectionOperation = void 0;\n\nconst operation_1 = require(\"./operation\");\n\nconst command_1 = require(\"./command\");\n/** @internal */\n\n\nclass DropCollectionOperation extends command_1.CommandOperation {\n  constructor(db, name, options) {\n    super(db, options);\n    this.options = options;\n    this.name = name;\n  }\n\n  execute(server, session, callback) {\n    super.executeCommand(server, session, {\n      drop: this.name\n    }, (err, result) => {\n      if (err) return callback(err);\n      if (result.ok) return callback(undefined, true);\n      callback(undefined, false);\n    });\n  }\n\n}\n\nexports.DropCollectionOperation = DropCollectionOperation;\n/** @internal */\n\nclass DropDatabaseOperation extends command_1.CommandOperation {\n  constructor(db, options) {\n    super(db, options);\n    this.options = options;\n  }\n\n  execute(server, session, callback) {\n    super.executeCommand(server, session, {\n      dropDatabase: 1\n    }, (err, result) => {\n      if (err) return callback(err);\n      if (result.ok) return callback(undefined, true);\n      callback(undefined, false);\n    });\n  }\n\n}\n\nexports.DropDatabaseOperation = DropDatabaseOperation;\noperation_1.defineAspects(DropCollectionOperation, [operation_1.Aspect.WRITE_OPERATION]);\noperation_1.defineAspects(DropDatabaseOperation, [operation_1.Aspect.WRITE_OPERATION]);","map":{"version":3,"sources":["../../src/operations/drop.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AACA,MAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;AASA;;;AACA,MAAa,uBAAb,SAA6C,SAAA,CAAA,gBAA7C,CAAsE;AAIpE,EAAA,WAAA,CAAY,EAAZ,EAAoB,IAApB,EAAkC,OAAlC,EAAgE;AAC9D,UAAM,EAAN,EAAU,OAAV;AACA,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,IAAL,GAAY,IAAZ;AACD;;AAED,EAAA,OAAO,CAAC,MAAD,EAAiB,OAAjB,EAAyC,QAAzC,EAAoE;AACzE,UAAM,cAAN,CAAqB,MAArB,EAA6B,OAA7B,EAAsC;AAAE,MAAA,IAAI,EAAE,KAAK;AAAb,KAAtC,EAA2D,CAAC,GAAD,EAAM,MAAN,KAAgB;AACzE,UAAI,GAAJ,EAAS,OAAO,QAAQ,CAAC,GAAD,CAAf;AACT,UAAI,MAAM,CAAC,EAAX,EAAe,OAAO,QAAQ,CAAC,SAAD,EAAY,IAAZ,CAAf;AACf,MAAA,QAAQ,CAAC,SAAD,EAAY,KAAZ,CAAR;AACD,KAJD;AAKD;;AAhBmE;;AAAtE,OAAA,CAAA,uBAAA,GAAA,uBAAA;AAsBA;;AACA,MAAa,qBAAb,SAA2C,SAAA,CAAA,gBAA3C,CAAoE;AAGlE,EAAA,WAAA,CAAY,EAAZ,EAAoB,OAApB,EAAgD;AAC9C,UAAM,EAAN,EAAU,OAAV;AACA,SAAK,OAAL,GAAe,OAAf;AACD;;AACD,EAAA,OAAO,CAAC,MAAD,EAAiB,OAAjB,EAAyC,QAAzC,EAAoE;AACzE,UAAM,cAAN,CAAqB,MAArB,EAA6B,OAA7B,EAAsC;AAAE,MAAA,YAAY,EAAE;AAAhB,KAAtC,EAA2D,CAAC,GAAD,EAAM,MAAN,KAAgB;AACzE,UAAI,GAAJ,EAAS,OAAO,QAAQ,CAAC,GAAD,CAAf;AACT,UAAI,MAAM,CAAC,EAAX,EAAe,OAAO,QAAQ,CAAC,SAAD,EAAY,IAAZ,CAAf;AACf,MAAA,QAAQ,CAAC,SAAD,EAAY,KAAZ,CAAR;AACD,KAJD;AAKD;;AAbiE;;AAApE,OAAA,CAAA,qBAAA,GAAA,qBAAA;AAgBA,WAAA,CAAA,aAAA,CAAc,uBAAd,EAAuC,CAAC,WAAA,CAAA,MAAA,CAAO,eAAR,CAAvC;AACA,WAAA,CAAA,aAAA,CAAc,qBAAd,EAAqC,CAAC,WAAA,CAAA,MAAA,CAAO,eAAR,CAArC","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DropDatabaseOperation = exports.DropCollectionOperation = void 0;\nconst operation_1 = require(\"./operation\");\nconst command_1 = require(\"./command\");\n/** @internal */\nclass DropCollectionOperation extends command_1.CommandOperation {\n    constructor(db, name, options) {\n        super(db, options);\n        this.options = options;\n        this.name = name;\n    }\n    execute(server, session, callback) {\n        super.executeCommand(server, session, { drop: this.name }, (err, result) => {\n            if (err)\n                return callback(err);\n            if (result.ok)\n                return callback(undefined, true);\n            callback(undefined, false);\n        });\n    }\n}\nexports.DropCollectionOperation = DropCollectionOperation;\n/** @internal */\nclass DropDatabaseOperation extends command_1.CommandOperation {\n    constructor(db, options) {\n        super(db, options);\n        this.options = options;\n    }\n    execute(server, session, callback) {\n        super.executeCommand(server, session, { dropDatabase: 1 }, (err, result) => {\n            if (err)\n                return callback(err);\n            if (result.ok)\n                return callback(undefined, true);\n            callback(undefined, false);\n        });\n    }\n}\nexports.DropDatabaseOperation = DropDatabaseOperation;\noperation_1.defineAspects(DropCollectionOperation, [operation_1.Aspect.WRITE_OPERATION]);\noperation_1.defineAspects(DropDatabaseOperation, [operation_1.Aspect.WRITE_OPERATION]);\n//# sourceMappingURL=drop.js.map"]},"metadata":{},"sourceType":"script"}