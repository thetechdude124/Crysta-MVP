{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DbStatsOperation = exports.CollStatsOperation = void 0;\n\nconst operation_1 = require(\"./operation\");\n\nconst command_1 = require(\"./command\");\n/**\n * Get all the collection statistics.\n * @internal\n */\n\n\nclass CollStatsOperation extends command_1.CommandOperation {\n  /**\n   * Construct a Stats operation.\n   *\n   * @param collection - Collection instance\n   * @param options - Optional settings. See Collection.prototype.stats for a list of options.\n   */\n  constructor(collection, options) {\n    super(collection, options);\n    this.options = options !== null && options !== void 0 ? options : {};\n    this.collectionName = collection.collectionName;\n  }\n\n  execute(server, session, callback) {\n    const command = {\n      collStats: this.collectionName\n    };\n\n    if (this.options.scale != null) {\n      command.scale = this.options.scale;\n    }\n\n    super.executeCommand(server, session, command, callback);\n  }\n\n}\n\nexports.CollStatsOperation = CollStatsOperation;\n/** @internal */\n\nclass DbStatsOperation extends command_1.CommandOperation {\n  constructor(db, options) {\n    super(db, options);\n    this.options = options;\n  }\n\n  execute(server, session, callback) {\n    const command = {\n      dbStats: true\n    };\n\n    if (this.options.scale != null) {\n      command.scale = this.options.scale;\n    }\n\n    super.executeCommand(server, session, command, callback);\n  }\n\n}\n\nexports.DbStatsOperation = DbStatsOperation;\noperation_1.defineAspects(CollStatsOperation, [operation_1.Aspect.READ_OPERATION]);\noperation_1.defineAspects(DbStatsOperation, [operation_1.Aspect.READ_OPERATION]);","map":{"version":3,"sources":["../../src/operations/stats.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AACA,MAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;AAcA;;;AAGG;;;AACH,MAAa,kBAAb,SAAwC,SAAA,CAAA,gBAAxC,CAAkE;AAIhE;;;;;AAKG;AACH,EAAA,WAAA,CAAY,UAAZ,EAAoC,OAApC,EAA8D;AAC5D,UAAM,UAAN,EAAkB,OAAlB;AACA,SAAK,OAAL,GAAe,OAAO,KAAA,IAAP,IAAA,OAAO,KAAA,KAAA,CAAP,GAAA,OAAA,GAAW,EAA1B;AACA,SAAK,cAAL,GAAsB,UAAU,CAAC,cAAjC;AACD;;AAED,EAAA,OAAO,CAAC,MAAD,EAAiB,OAAjB,EAAyC,QAAzC,EAAsE;AAC3E,UAAM,OAAO,GAAa;AAAE,MAAA,SAAS,EAAE,KAAK;AAAlB,KAA1B;;AACA,QAAI,KAAK,OAAL,CAAa,KAAb,IAAsB,IAA1B,EAAgC;AAC9B,MAAA,OAAO,CAAC,KAAR,GAAgB,KAAK,OAAL,CAAa,KAA7B;AACD;;AAED,UAAM,cAAN,CAAqB,MAArB,EAA6B,OAA7B,EAAsC,OAAtC,EAA+C,QAA/C;AACD;;AAvB+D;;AAAlE,OAAA,CAAA,kBAAA,GAAA,kBAAA;AAgCA;;AACA,MAAa,gBAAb,SAAsC,SAAA,CAAA,gBAAtC,CAAgE;AAG9D,EAAA,WAAA,CAAY,EAAZ,EAAoB,OAApB,EAA2C;AACzC,UAAM,EAAN,EAAU,OAAV;AACA,SAAK,OAAL,GAAe,OAAf;AACD;;AAED,EAAA,OAAO,CAAC,MAAD,EAAiB,OAAjB,EAAyC,QAAzC,EAAqE;AAC1E,UAAM,OAAO,GAAa;AAAE,MAAA,OAAO,EAAE;AAAX,KAA1B;;AACA,QAAI,KAAK,OAAL,CAAa,KAAb,IAAsB,IAA1B,EAAgC;AAC9B,MAAA,OAAO,CAAC,KAAR,GAAgB,KAAK,OAAL,CAAa,KAA7B;AACD;;AAED,UAAM,cAAN,CAAqB,MAArB,EAA6B,OAA7B,EAAsC,OAAtC,EAA+C,QAA/C;AACD;;AAf6D;;AAAhE,OAAA,CAAA,gBAAA,GAAA,gBAAA;AAiNA,WAAA,CAAA,aAAA,CAAc,kBAAd,EAAkC,CAAC,WAAA,CAAA,MAAA,CAAO,cAAR,CAAlC;AACA,WAAA,CAAA,aAAA,CAAc,gBAAd,EAAgC,CAAC,WAAA,CAAA,MAAA,CAAO,cAAR,CAAhC","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DbStatsOperation = exports.CollStatsOperation = void 0;\nconst operation_1 = require(\"./operation\");\nconst command_1 = require(\"./command\");\n/**\n * Get all the collection statistics.\n * @internal\n */\nclass CollStatsOperation extends command_1.CommandOperation {\n    /**\n     * Construct a Stats operation.\n     *\n     * @param collection - Collection instance\n     * @param options - Optional settings. See Collection.prototype.stats for a list of options.\n     */\n    constructor(collection, options) {\n        super(collection, options);\n        this.options = options !== null && options !== void 0 ? options : {};\n        this.collectionName = collection.collectionName;\n    }\n    execute(server, session, callback) {\n        const command = { collStats: this.collectionName };\n        if (this.options.scale != null) {\n            command.scale = this.options.scale;\n        }\n        super.executeCommand(server, session, command, callback);\n    }\n}\nexports.CollStatsOperation = CollStatsOperation;\n/** @internal */\nclass DbStatsOperation extends command_1.CommandOperation {\n    constructor(db, options) {\n        super(db, options);\n        this.options = options;\n    }\n    execute(server, session, callback) {\n        const command = { dbStats: true };\n        if (this.options.scale != null) {\n            command.scale = this.options.scale;\n        }\n        super.executeCommand(server, session, command, callback);\n    }\n}\nexports.DbStatsOperation = DbStatsOperation;\noperation_1.defineAspects(CollStatsOperation, [operation_1.Aspect.READ_OPERATION]);\noperation_1.defineAspects(DbStatsOperation, [operation_1.Aspect.READ_OPERATION]);\n//# sourceMappingURL=stats.js.map"]},"metadata":{},"sourceType":"script"}