{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.OptionsOperation = void 0;\n\nconst operation_1 = require(\"./operation\");\n\nconst error_1 = require(\"../error\");\n/** @internal */\n\n\nclass OptionsOperation extends operation_1.AbstractOperation {\n  constructor(collection, options) {\n    super(options);\n    this.options = options;\n    this.collection = collection;\n  }\n\n  execute(server, session, callback) {\n    const coll = this.collection;\n    coll.s.db.listCollections({\n      name: coll.collectionName\n    }, { ...this.options,\n      nameOnly: false,\n      readPreference: this.readPreference,\n      session\n    }).toArray((err, collections) => {\n      if (err || !collections) return callback(err);\n\n      if (collections.length === 0) {\n        // TODO(NODE-3485)\n        return callback(new error_1.MongoAPIError(`collection ${coll.namespace} not found`));\n      }\n\n      callback(err, collections[0].options);\n    });\n  }\n\n}\n\nexports.OptionsOperation = OptionsOperation;","map":{"version":3,"sources":["../../src/operations/options_operation.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,WAAA,GAAA,OAAA,CAAA,aAAA,CAAA;;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;AAOA;;;AACA,MAAa,gBAAb,SAAsC,WAAA,CAAA,iBAAtC,CAAiE;AAI/D,EAAA,WAAA,CAAY,UAAZ,EAAoC,OAApC,EAA6D;AAC3D,UAAM,OAAN;AACA,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,UAAL,GAAkB,UAAlB;AACD;;AAED,EAAA,OAAO,CAAC,MAAD,EAAiB,OAAjB,EAAyC,QAAzC,EAAqE;AAC1E,UAAM,IAAI,GAAG,KAAK,UAAlB;AAEA,IAAA,IAAI,CAAC,CAAL,CAAO,EAAP,CACG,eADH,CAEI;AAAE,MAAA,IAAI,EAAE,IAAI,CAAC;AAAb,KAFJ,EAGI,EAAE,GAAG,KAAK,OAAV;AAAmB,MAAA,QAAQ,EAAE,KAA7B;AAAoC,MAAA,cAAc,EAAE,KAAK,cAAzD;AAAyE,MAAA;AAAzE,KAHJ,EAKG,OALH,CAKW,CAAC,GAAD,EAAM,WAAN,KAAqB;AAC5B,UAAI,GAAG,IAAI,CAAC,WAAZ,EAAyB,OAAO,QAAQ,CAAC,GAAD,CAAf;;AACzB,UAAI,WAAW,CAAC,MAAZ,KAAuB,CAA3B,EAA8B;AAC5B;AACA,eAAO,QAAQ,CAAC,IAAI,OAAA,CAAA,aAAJ,CAAkB,cAAc,IAAI,CAAC,SAAS,YAA9C,CAAD,CAAf;AACD;;AAED,MAAA,QAAQ,CAAC,GAAD,EAAM,WAAW,CAAC,CAAD,CAAX,CAAe,OAArB,CAAR;AACD,KAbH;AAcD;;AA3B8D;;AAAjE,OAAA,CAAA,gBAAA,GAAA,gBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.OptionsOperation = void 0;\nconst operation_1 = require(\"./operation\");\nconst error_1 = require(\"../error\");\n/** @internal */\nclass OptionsOperation extends operation_1.AbstractOperation {\n    constructor(collection, options) {\n        super(options);\n        this.options = options;\n        this.collection = collection;\n    }\n    execute(server, session, callback) {\n        const coll = this.collection;\n        coll.s.db\n            .listCollections({ name: coll.collectionName }, { ...this.options, nameOnly: false, readPreference: this.readPreference, session })\n            .toArray((err, collections) => {\n            if (err || !collections)\n                return callback(err);\n            if (collections.length === 0) {\n                // TODO(NODE-3485)\n                return callback(new error_1.MongoAPIError(`collection ${coll.namespace} not found`));\n            }\n            callback(err, collections[0].options);\n        });\n    }\n}\nexports.OptionsOperation = OptionsOperation;\n//# sourceMappingURL=options_operation.js.map"]},"metadata":{},"sourceType":"script"}